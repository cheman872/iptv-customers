<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>IPTV Sync Bookmarklet</title>
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:'Segoe UI',system-ui,-apple-system,sans-serif;background:#0f172a;color:#e2e8f0;min-height:100vh;display:flex;align-items:center;justify-content:center}
.container{max-width:700px;width:90%;padding:40px}
h1{font-size:1.8rem;color:#38bdf8;margin-bottom:8px}
.subtitle{color:#94a3b8;margin-bottom:30px}
.bookmarklet-box{background:#1e293b;border:1px solid #334155;border-radius:12px;padding:24px;margin-bottom:24px}
.bookmarklet-box h2{color:#38bdf8;font-size:1.1rem;margin-bottom:12px}
.drag-area{background:#0f172a;border:2px dashed #475569;border-radius:8px;padding:20px;text-align:center;margin-bottom:16px}
.drag-area a{display:inline-block;background:linear-gradient(135deg,#0ea5e9,#3b82f6);color:#fff;padding:12px 28px;border-radius:8px;text-decoration:none;font-weight:600;font-size:1rem;cursor:move}
.drag-area a:hover{background:linear-gradient(135deg,#0284c7,#2563eb)}
.drag-area p{color:#94a3b8;font-size:.85rem;margin-top:10px}
.steps{margin-top:16px}
.steps li{color:#94a3b8;margin-bottom:8px;font-size:.9rem}
.steps li strong{color:#e2e8f0}
.server-table{width:100%;border-collapse:collapse;margin-top:12px}
.server-table th{background:#334155;color:#38bdf8;padding:8px 12px;text-align:left;font-size:.85rem}
.server-table td{padding:8px 12px;border-bottom:1px solid #334155;font-size:.85rem;color:#94a3b8}
.server-table tr:hover td{background:#1e293b}
.note{background:#1e293b;border-left:3px solid #f59e0b;padding:12px 16px;border-radius:0 8px 8px 0;margin-top:24px;font-size:.85rem;color:#94a3b8}
.note strong{color:#f59e0b}
</style>
</head>
<body>
<div class="container">
<h1>IPTV Customer Sync</h1>
<p class="subtitle">One-click bookmarklet to sync panel data to your website</p>

<div class="bookmarklet-box">
<h2>Step 1: Add Bookmarklet</h2>
<div class="drag-area">
<a href="javascript:void((async function(){const U='https://script.google.com/macros/s/AKfycbwSnjCFNWg4_2dE2NGByh6s1umLKk2yd-bm588c6y5gjX8xzyThR6Aoq-T-nDB2O2-F/exec';const M={'bill.airce.io':{'amcheema':'Gold AMCH','samche':'GoldSamChe'},'bill.gprod.co':{'amble':'Gold 4K Premium'},'fast4k.cc':{'amble2':'Smart Amble2','TV2021':'Smart 2021','tv2021':'Smart 2021'},'bill.spicetv.cc':{'amble2':'Spice'},'billing.stream4k.me':{'amble':'Stream 4K'},'pay.titan4k.cc':{'tv2021':'Titan'},'sharktv.pk':{'amble2':'Crown'}};const h=location.hostname;const dm=M[h];if(!dm){alert('Unknown panel: '+h);return;}const bt=document.body.innerText;let u='',sn='';for(const[k,v] of Object.entries(dm)){if(bt.includes(k)||bt.includes('@'+k)){u=k;sn=v;break;}}if(!sn){const m=prompt('Enter account ('+Object.keys(dm).join(', ')+'):');if(!m||!dm[m]){alert('Invalid. Aborting.');return;}u=m;sn=dm[m];}const ov=document.createElement('div');ov.id='sync-ov';ov.innerHTML='<div style=%22position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.7);z-index:99999;display:flex;align-items:center;justify-content:center%22><div style=%22background:%23fff;padding:30px 40px;border-radius:12px;text-align:center;font-family:sans-serif;min-width:300px%22><h2 style=%22margin:0 0 5px;color:%23333%22>Syncing: '+sn+'</h2><p style=%22color:%23888;margin:0 0 10px;font-size:.85em%22>'+u+' @ '+h+'</p><p id=%22ss%22 style=%22color:%23666;margin:0%22>Preparing...</p></div></div>';document.body.appendChild(ov);const st=document.getElementById('ss');try{const sel=document.querySelector('select[name*=%22length%22],select.form-control');if(sel){const opts=[...sel.options].map(o=>parseInt(o.value)).filter(v=>!isNaN(v));const mx=Math.max(...opts);if(parseInt(sel.value)!==mx){sel.value=String(mx);sel.dispatchEvent(new Event('change',{bubbles:true}));await new Promise(r=>setTimeout(r,2000));}}const pm=document.body.innerText.match(/Showing\\s+\\d+\\s+to\\s+\\d+\\s+of\\s+([\\d,]+)\\s+entries/);const te=pm?parseInt(pm[1].replace(/,/g,'')):0;const ps=sel?parseInt(sel.value)||100:100;const tp=Math.max(1,Math.ceil(te/ps));st.textContent='Found '+te+' users ('+tp+' pages)...';const hs=[...document.querySelectorAll('table thead th')].map(x=>x.textContent.trim().toLowerCase());let ic=-1,mc=-1,ec=-1,nc=-1;hs.forEach((x,i)=>{if(x.includes('username')||x==='id'||(x.includes('customer')&&x.includes('id')))ic=i;if(x.includes('mac'))mc=i;if(x.includes('exp')||x.includes('date'))ec=i;if((x.includes('name')||x.includes('owner'))&&!x.includes('user')&&!x.includes('id'))nc=i;});if(ic===-1)ic=1;let all=[];function scrape(){const rows=document.querySelectorAll('table tbody tr');const us=[];rows.forEach(r=>{const c=r.querySelectorAll('td');if(c.length<3)return;const id=c[ic]?c[ic].textContent.trim():'';const mac=mc>=0&&c[mc]?c[mc].textContent.trim():'';const exp=ec>=0&&c[ec]?c[ec].textContent.trim():'';const nm=nc>=0&&c[nc]?c[nc].textContent.trim():'';if(!id&&!mac&&!nm)return;us.push({id:id,mac:mac,expiry:exp,name:nm});});return us;}const fb=document.querySelector('a[data-dt-idx=%22first%22],.paginate_button.first:not(.disabled)');if(fb){fb.click();await new Promise(r=>setTimeout(r,1500));}for(let p=1;p<=tp;p++){st.textContent='Scraping page '+p+'/'+tp+'...';all=all.concat(scrape());if(p<tp){const nb=document.querySelector('.paginate_button.next:not(.disabled) a,.pagination .next:not(.disabled) a,li.next:not(.disabled) a');if(nb){nb.click();await new Promise(r=>setTimeout(r,1500));}else break;}}st.textContent='Sending '+all.length+' users...';const r=await fetch(U,{method:'POST',headers:{'Content-Type':'text/plain'},body:JSON.stringify({serverName:sn,users:all})});const res=await r.json();if(res.success){st.innerHTML='<span style=%22color:green;font-size:1.3em%22>&#10004;</span> '+res.message;}else{st.innerHTML='<span style=%22color:red%22>Error: '+res.error+'</span>';}}catch(e){st.innerHTML='<span style=%22color:red%22>Error: '+e.message+'</span>';}setTimeout(()=>{const el=document.getElementById('sync-ov');if(el)el.remove();},4000);})());">&#128260; Sync IPTV Data</a>
<p>Drag this button to your bookmarks bar</p>
</div>

<ol class="steps">
<li><strong>Drag</strong> the blue button above to your browser's bookmarks bar</li>
<li><strong>Log into</strong> any IPTV panel (see supported panels below)</li>
<li><strong>Navigate</strong> to the Users / Lines list page</li>
<li><strong>Click</strong> the bookmark â it will scrape all pages and sync automatically</li>
</ol>
</div>

<div class="bookmarklet-box">
<h2>Supported Panels &amp; Accounts</h2>
<table class="server-table">
<thead><tr><th>Panel URL</th><th>Account</th><th>Server Name</th></tr></thead>
<tbody>
<tr><td>bill.airce.io</td><td>amcheema</td><td>Gold AMCH</td></tr>
<tr><td>bill.airce.io</td><td>samche</td><td>GoldSamChe</td></tr>
<tr><td>bill.gprod.co</td><td>amble</td><td>Gold 4K Premium</td></tr>
<tr><td>fast4k.cc</td><td>amble2</td><td>Smart Amble2</td></tr>
<tr><td>fast4k.cc</td><td>TV2021 / tv2021</td><td>Smart 2021</td></tr>
<tr><td>bill.spicetv.cc</td><td>amble2</td><td>Spice</td></tr>
<tr><td>billing.stream4k.me</td><td>amble</td><td>Stream 4K</td></tr>
<tr><td>pay.titan4k.cc</td><td>tv2021</td><td>Titan</td></tr>
<tr><td>sharktv.pk</td><td>amble2</td><td>Crown</td></tr>
</tbody>
</table>
</div>

<div class="note">
<strong>Note:</strong> After syncing, data will appear on your website at
<a href="https://cheman872.github.io/iptv-customers/" style="color:#38bdf8">cheman872.github.io/iptv-customers</a>
within seconds. You can sync multiple panels â each one updates its own server's data independently.
</div>
</div>
</body>
</html>
